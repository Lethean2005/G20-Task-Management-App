<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Analytics Dashboard for tracking projects, tasks, and deadlines.">
    <title>Analytics Dashboard</title>
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/analytics.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <link rel="stylesheet" href="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.min.css">
</head>
<body>
    <div class="container">
        <!-- Toggle Button -->
        <div class="menu-toggle" id="menuToggle">
            <i class="bi bi-list"></i> <!-- Updated to use Bootstrap icon (bi-list for burger icon) -->
        </div>

        <!-- Left Side Menu -->
        <div class="sidebar" id="sidebar">
            <div class="logo">
                <img src="images/logoicon.png" alt="Logo">
                <span class="logo-text">Skill Task</span>
            </div>
            <ul class="menu">
                <li>
                    <a href="#" class="active">
                        <i class="bi bi-house-door"></i> <!-- Updated to use Bootstrap icon (bi-house-door for dashboard) -->
                        <span class="menu-text">Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="task.html">
                        <i class="bi bi-briefcase"></i> <!-- Updated to use Bootstrap icon (bi-briefcase for projects) -->
                        <span class="menu-text">Projects</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="bi bi-check-square"></i> <!-- Updated to use Bootstrap icon (bi-check-square for tasks) -->
                        <span class="menu-text">Tasks</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="bi bi-calendar-check"></i> <!-- Updated to use Bootstrap icon (bi-calendar-check for calendar) -->
                        <span class="menu-text">Calendar</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="bi bi-tags"></i> <!-- Updated to use Bootstrap icon (bi-tags for categories) -->
                        <span class="menu-text">Categories</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="bi bi-hourglass-split"></i> <!-- Updated to use Bootstrap icon (bi-hourglass-split for pending tasks) -->
                        <span class="menu-text">Pending Tasks</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="bi bi-check-circle"></i> <!-- Updated to use Bootstrap icon (bi-check-circle for completed tasks) -->
                        <span class="menu-text">Completed Tasks</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <i class="bi bi-bar-chart-line"></i> <!-- Updated to use Bootstrap icon (bi-bar-chart-line for analytics) -->
                        <span class="menu-text">Analytics</span>
                    </a>
                </li>
            </ul>
        </div>
        <!-- Main Content -->
        <div class="main-content" id="mainContent">
            <h1>Welcome to Skill Task</h1>
                <!-- Cards Section -->
                <section class="card-container">
                    <div class="card total" data-title="Project" data-percent="15%">
                        <h2>Project</h2>
                        <span>15% of total</span>
                    </div>
                    <div class="card active" data-title="Deadline" data-percent="14%">
                        <h2>Deadline</h2>
                        <span>14% of total</span>
                    </div>
                    <div class="card completed" data-title="Type" data-percent="81%">
                        <h2>Type</h2>
                        <span>81% of total</span>
                    </div>
                    <div class="card additional-active" data-title="Completed" data-percent="14%">
                        <h2>Completed</h2>
                        <span>14% of total</span>
                    </div>
                </section>
                <!-- Shipment Chart -->
                <section class="chart-container">
                    <h2>To Do Analytics</h2>
                    <canvas id="shipmentChart" width="400" height="200"></canvas>
                </section>

                <!-- Revenue Chart -->
                <section class="chart-container">
                    <h2>The Process Analytics</h2>
                    <canvas id="revenueChart" width="400" height="200"></canvas>
                </section>

                <!-- Expenses Chart -->
                <section class="chart-container">
                    <h2>Done Analytics</h2>
                    <canvas id="expensesChart" width="400" height="200"></canvas>
                </section>

                <!-- Buttons for Time Frame Selection -->
                <div class="chart-buttons">
                    <button class="active">Year</button>
                    <button>Month</button>
                    <button>Week</button>
                    <button>All</button>
                </div>
        </div>
    </div>
    <!-- Scripts -->
    <script>
// // Firebase Configuration (same as in your Project Page)
const firebaseConfig = {
    apiKey: "AIzaSyDX-sHpuS0og69TgIwe3JzQlIdKEbaNGXU",
    authDomain: "task-management-6c572.firebaseapp.com",
    databaseURL: "https://task-management-6c572-default-rtdb.firebaseio.com",
    projectId: "task-management-6c572",
    storageBucket: "task-management-6c572.firebasestorage.app",
    messagingSenderId: "384210904544",
    appId: "1:384210904544:web:e6c6ac10efcee8ccb77785"
};

// Initialize Firebase
const app = firebase.initializeApp(firebaseConfig);
const database = firebase.database();

// Function to fetch project data from Firebase
function fetchProjectData() {
    const projectRef = database.ref('projects/');

    projectRef.on('value', (snapshot) => {
        const data = snapshot.val();
        if (data) {
            console.log('Fetched project data:', data);
            processDataForCharts(data); // Process data for charts
        } else {
            console.error('No project data found.');
        }
    });
}

// Function to process fetched data for charts
function processDataForCharts(projectData) {
    const labels = [];
    const progressData = [];
    const statusData = [];

    // Loop through project data
    for (const projectId in projectData) {
        const project = projectData[projectId];
        labels.push(project.title); // Use project titles as labels
        progressData.push(project.progress); // Use progress for the chart
        statusData.push(project.status); // Use status for additional analysis
    }

    // Initialize or update charts with the processed data
    initializeCharts(labels, progressData);
}

// Call the function to fetch project data
fetchProjectData();
      </script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/notifyjs-browser/dist/notify.js"></script>
    <script src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <script src="js/analyics.js" defer></script>
</body>
</html>